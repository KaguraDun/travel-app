(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{108:function(t,e,n){},109:function(t,e,n){},110:function(t,e,n){},111:function(t,e,n){},112:function(t,e,n){},113:function(t,e,n){},123:function(t,e,n){},125:function(t,e,n){"use strict";n.r(e);n(47);var c=n(0),r=n(20),a=n(8),i=n(23),o=n(7),s=n(10),u=n.n(s),l=n(21),j="5ae2e3f221c38a28845f05b65947648325a329e2626a4b6b7f12a1df",h={fetchAllCountries:function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://restcountries.eu/rest/v2/",t.abrupt("return",fetch("https://restcountries.eu/rest/v2/"));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),fetchCountry:function(){var t=Object(l.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://restcountries.eu/rest/v2/name/".concat(e),t.abrupt("return",fetch(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fetchCountryInfoByName:function(){var t=Object(l.a)(u.a.mark((function t(e){var n,c,r=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:"en","russian federation"!==e){t.next=3;break}return t.abrupt("return",fetch("https://".concat(n,".wikipedia.org/w/api.php?action=query&origin=*&prop=extracts&format=json&exintro=&titles=russia")));case 3:if("united states of america"!==e){t.next=5;break}return t.abrupt("return",fetch("https://".concat(n,".wikipedia.org/w/api.php?action=query&origin=*&prop=extracts&format=json&exintro=&titles=United_States")));case 5:return c="https://".concat(n,".wikipedia.org/w/api.php?action=query&origin=*&prop=extracts&format=json&exintro=&titles=").concat(e),t.abrupt("return",fetch(c));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fetchCapitalCoordinates:function(){var t=Object(l.a)(u.a.mark((function t(e,n){var c,r,a=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.length>2&&void 0!==a[2]?a[2]:"en",r="https://api.opentripmap.com/0.1/".concat(c,"/places/geoname?name=").concat(n,"&country=").concat(e,"&apikey=").concat(j),t.abrupt("return",fetch(r));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),fetchCapitalAttractions:function(){var t=Object(l.a)(u.a.mark((function t(e,n,c){var r,a,i=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>3&&void 0!==i[3]?i[3]:"en",a="https://api.opentripmap.com/0.1/".concat(r,"/places/radius?radius=").concat(e,"&lon=").concat(n,"&lat=").concat(c,"&rate=3&format=json&limit=6&apikey=").concat(j),t.abrupt("return",fetch(a));case 3:case"end":return t.stop()}}),t)})));return function(e,n,c){return t.apply(this,arguments)}}(),fetchAttractionInfo:function(){var t=Object(l.a)(u.a.mark((function t(e){var n,c,r=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"en",c="https://api.opentripmap.com/0.1/".concat(n,"/places/xid/").concat(e,"?apikey=").concat(j),t.abrupt("return",fetch(c));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fetchAttractionVideo:function(){var t=Object(l.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"AIzaSyDoSce_kXLM52dh1hmFXUheB8pzSxbEXGs","https://www.googleapis.com/youtube/v3/search?",n="key=".concat("AIzaSyDoSce_kXLM52dh1hmFXUheB8pzSxbEXGs","&type=video&part=snippet&maxResults=1&q=").concat(e," attractions"),t.abrupt("return",fetch("https://www.googleapis.com/youtube/v3/search?"+n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fetchWeather:function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"http://api.openweathermap.org/data/2.5/weather?q=","492003bfd44fb7dbe75df7d92a5e55d1",t.abrupt("return",fetch("".concat("http://api.openweathermap.org/data/2.5/weather?q=").concat(e,"&appid=").concat("492003bfd44fb7dbe75df7d92a5e55d1","&units=metric")));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fetchCurrency:function(){var t=Object(l.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://api.exchangeratesapi.io/latest?base=USD&symbols=USD,EUR,".concat(e),t.abrupt("return",fetch(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=n(127),f=n(128),p=n(35),b=n(40),O=n.n(b),x=(n(68),n(1)),m=function(t){var e=t.attraction,n=Object(c.useState)(null),r=Object(a.a)(n,2),i=r[0],o=r[1];Object(c.useEffect)((function(){h.fetchAttractionInfo(e.xid).then((function(t){return t.json()})).then((function(t){return o(t)}))}),[]);var s=i&&!i.error,u=s?i.wikipedia_extracts.text:"...loading",l=s?i.preview.source:"",j=e.kinds.replace(/_/g," ").replace(/,/g,", ");return Object(x.jsxs)("div",{className:"attraction",children:[Object(x.jsxs)("div",{className:"attraction__info",children:[Object(x.jsx)("h2",{children:e.name}),Object(x.jsx)("h3",{children:j}),Object(x.jsx)("div",{className:"attraction__text",children:u})]}),Object(x.jsx)("img",{className:"attraction__image",src:l})]})},v=(n(70),n(71),n(72),function(t){var e=t.countryData,n=Object(c.useState)(null),r=Object(a.a)(n,2),i=r[0],o=r[1],s=e.alpha2Code,u=e.capital;Object(c.useEffect)((function(){h.fetchCapitalCoordinates(s,u).then((function(t){return t.json()})).then((function(t){return h.fetchCapitalAttractions(15e3,t.lon,t.lat).then((function(t){return t.json()})).then((function(t){return o(t)}))}))}),[]);var l=[];return i&&(l=i.map((function(t){return Object(x.jsx)("div",{children:Object(x.jsx)(m,{attraction:t})},t.xid)}))),Object(x.jsx)("div",{className:"attractions__slider",children:Object(x.jsx)(O.a,Object(p.a)(Object(p.a)({},{arrows:!0,dots:!0,infinite:!0,slidesToShow:1}),{},{children:l}))})}),g=n(41),y=(n(22),function(t){var e=t.countryData,n=Object(c.useState)(null),r=Object(a.a)(n,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){var t=g.lookupViaCity(e.capital),n={timeZone:t[0]&&t[0].timezone?t[0].timezone:"UTC",day:"numeric",month:"short",weekday:"short",hour:"numeric",hour12:!1,minute:"numeric",second:"numeric"};setInterval((function(){o((new Date).toLocaleString("en",n).replace(/:/g,"-"))}),1e3)}),[]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"h3",children:"Capital Time:"}),Object(x.jsx)("div",{className:"h4",children:"".concat(i||"...loading")})]})}),w=(n(76),function(t){var e=t.countryDetail;if(!e)return Object(x.jsx)("div",{children:"...loading"});return Object(x.jsx)("div",{className:"country",children:Object(x.jsx)("div",{className:"country__description lead",dangerouslySetInnerHTML:{__html:e.extract}})})}),C=(n(77),function(t){var e=t.countryData;if(!e)return Object(x.jsx)("div",{children:"...loading"});var n=e.name,c=e.flag,r=e.capital;return Object(x.jsx)("div",{className:"country__heading",style:{width:"400px",height:"400px",backgroundImage:"url(".concat(c,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:Object(x.jsxs)("div",{className:"country__heading-info",children:[Object(x.jsxs)("h2",{className:"country__name",children:[n,Object(x.jsx)("br",{})]}),Object(x.jsx)("h3",{className:"country__capital",children:r})]})})}),N=function(t){var e=t.countryCurrencies;if(!e)return Object(x.jsx)("div",{children:"...loading"});var n=Object(c.useState)(null),r=Object(a.a)(n,2),i=r[0],o=r[1];Object(c.useEffect)((function(){h.fetchCurrency(e[0].code).then((function(t){return t.json()})).then((function(t){o(t)}))}),[]);var s=[];if(i&&i.rates)for(var u=0,l=Object.entries(i.rates);u<l.length;u++){var j=Object(a.a)(l[u],2),d=j[0],f=j[1],p=Object(x.jsxs)("div",{children:[d,": ",f.toFixed(2)]},d);s.push(p)}return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"h4",children:"Currency name:"}),Object(x.jsx)("div",{className:"h4",children:"".concat(e[0].name," ").concat(e[0].symbol)}),Object(x.jsx)("div",{className:"h4",children:s||"...loading"})]})},k=n(129),_=(n(78),function(){return Object(x.jsxs)("select",{className:"selectpicker",children:[Object(x.jsx)("option",{value:"ru",children:"ru"}),Object(x.jsx)("option",{value:"en",children:"en"}),Object(x.jsx)("option",{value:"jp",children:"jp"})]})}),S=n(132),L=(n(79),function(t){var e=t.searchHandler,n=t.searchValue;return Object(x.jsx)(S.a,{className:"search",onChange:function(t){return e(t.target.value)},onFocus:function(t){return t.target.select()},placeholder:"Enter Country Name",value:n})}),A=(n(84),function(t){var e=t.isMainPage,n=t.searchHandler,c=t.searchValue,r=e?Object(x.jsx)(L,{searchHandler:n,searchValue:c}):null;return Object(x.jsxs)(k.a,{bg:"light",className:"container header",expand:"lg",children:[Object(x.jsx)(i.b,{className:"row",to:"/",children:Object(x.jsx)("h1",{className:"header__logo",children:"Travel App"})}),r,Object(x.jsx)(_,{})]})}),D=n(34),I={width:"400px",height:"400px"},E=function(t){var e=t.countryData,n={lat:e.latlng[0],lng:e.latlng[1]};return Object(x.jsx)(D.b,{googleMapsApiKey:"AIzaSyAFYEI6Mv2SthzLCRsN_jTogm5aWJ8Ajt8",children:Object(x.jsx)(D.a,{mapContainerStyle:I,center:n,zoom:5})})},z=n(45),M=n.n(z),T=(n(108),function(t){var e=t.countryName,n=Object(c.useState)(null),r=Object(a.a)(n,2),i=r[0],o=r[1];Object(c.useEffect)((function(){h.fetchAttractionVideo(e).then((function(t){return t.json()})).then((function(t){return o(t)}))}),[]);var s=i&&i.items;return Object(x.jsx)("div",{className:"video",children:Object(x.jsx)(M.a,{controls:!0,url:s?"https://www.youtube.com/watch?v="+i.items[0].id.videoId:"...Loading"})})}),F=(n(109),function(t){var e=t.weather;return Object(x.jsxs)("div",{className:"weather",children:[Object(x.jsxs)("div",{children:["Temperature: ",e.main.temp]}),Object(x.jsx)("div",{children:e.weather[0].description}),Object(x.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png")})]})}),P=function(t){var e=t.capital,n=Object(c.useState)(null),r=Object(a.a)(n,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){h.fetchWeather(e).then((function(t){return t.json()})).then((function(t){return o(t)}))}),[]),Object(x.jsx)("div",{className:"h3",children:i?Object(x.jsx)(F,{weather:i}):null})},V=(n(110),function(){var t=Object(c.useState)({}),e=Object(a.a)(t,2),n=e[0],r=e[1],i=Object(c.useState)(null),s=Object(a.a)(i,2),u=s[0],l=s[1],j=Object(o.e)().pathname.split("/")[1];return Object(c.useEffect)((function(){h.fetchCountryInfoByName(j).then((function(t){return t.json()})).then((function(t){return r(Object.values(t.query.pages)[0])})),h.fetchCountry(j).then((function(t){return t.json()})).then((function(t){return l(t[0])}))}),[]),console.log(u),Object(x.jsxs)("div",{className:"country-page",children:[Object(x.jsx)(A,{isMainPage:!1}),Object(x.jsx)(d.a,{children:Object(x.jsxs)(f.a,{children:[Object(x.jsxs)("div",{className:"country-page__widget",children:[u?Object(x.jsx)(y,{countryData:u}):null,u&&Object(x.jsx)(P,{capital:u.capital}),u&&Object(x.jsx)(N,{countryCurrencies:u.currencies})]}),Object(x.jsx)(C,{countryData:u}),u?Object(x.jsx)(E,{countryData:u}):null]})}),Object(x.jsx)(w,{countryDetail:n}),Object(x.jsx)(T,{countryName:j}),u?Object(x.jsx)(v,{countryData:u}):null]})}),q=n(130),B=(n(111),function(){return Object(x.jsxs)("div",{className:"bg-light container footer ",children:[Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)(q.a,{horizontal:!0,children:[Object(x.jsx)(q.a.Item,{children:Object(x.jsx)("a",{href:"https://github.com/PavelAsadchy",children:"Pavel Asadchy"})}),Object(x.jsx)(q.a.Item,{children:Object(x.jsx)("a",{href:"https://github.com/KaguraDun",children:"Vasily Kovnev"})})]})}),Object(x.jsx)("span",{className:"row",children:"2021"}),Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("img",{alt:"",className:" logo",src:"../../rs_school_js.svg"})})]})}),R=n(131),U=(n(112),function(t){var e=t.item,n=e.name,c=e.nativeName,r=e.capital,a=e.flag;return Object(x.jsxs)(R.a,{children:[Object(x.jsx)(R.a.Img,{className:"card__img",src:a,variant:"top"}),Object(x.jsxs)(R.a.Body,{children:[Object(x.jsx)(R.a.Title,{children:n}),Object(x.jsx)(R.a.Subtitle,{className:"mb-2 text-muted",children:r}),Object(x.jsxs)(R.a.Text,{children:["Native name: ",c]})]})]})}),X=(n(113),function(t){var e=t.searchResult;return Object(x.jsx)("div",{className:"search-container",children:e.map((function(t){return Object(x.jsx)("div",{children:Object(x.jsx)(i.b,{to:"/".concat(t.name.toLocaleLowerCase()),children:Object(x.jsx)(U,{item:t})})},t.name)}))})}),H=n(46),W=(n(123),function(t){var e=t.countries,n=t.onClickAction;return Object(x.jsx)("div",{className:"world-map",style:{display:"flex",justifyContent:"center"},children:Object(x.jsx)(H.WorldMap,{backgroundColor:"-webkit-linear-gradient(to top, #cfdef3, #e0eafc)",color:"red",data:e,onClickFunction:n,size:"xxl",title:"Click on country to know more","value-suffix":"people"})})}),J=function(t){var e=t.countriesList,n=t.randomCountriesList,r=Object(c.useState)(""),i=Object(a.a)(r,2),o=i[0],s=i[1],u=Object(x.jsx)(A,{isMainPage:!0,searchHandler:function(t){return s(t)},searchValue:o});if(!e||!n)return Object(x.jsx)("div",{children:u});var l=e.filter((function(t){return t.name.toLocaleLowerCase().includes(o.toLocaleLowerCase())||t.capital.toLocaleLowerCase().includes(o.toLocaleLowerCase())})),j=e.map((function(t){return{country:t.alpha2Code,value:t.population}}));return Object(x.jsxs)("div",{children:[u,o?Object(x.jsx)(X,{searchResult:l}):Object(x.jsx)(X,{searchResult:n}),Object(x.jsx)(W,{countries:j,onClickAction:function(t,n,c,r,a,i){var o=e.find((function(t){return t.alpha2Code.toLocaleLowerCase()===c.toLocaleLowerCase()}));s(o.name)}})]})};var K=function(){var t=Object(c.useState)(null),e=Object(a.a)(t,2),n=e[0],r=e[1],s=Object(c.useState)(null),u=Object(a.a)(s,2),l=u[0],j=u[1];return Object(c.useEffect)((function(){h.fetchAllCountries().then((function(t){return t.json()})).then((function(t){r(t);var e=function(t){for(var e=t.slice(),n=e.length-1;n>0;n--){var c=Math.floor(Math.random()*(n+1)),r=e[n];e[n]=e[c],e[c]=r}return e}(t).slice(0,8);j(e)}))}),[]),Object(x.jsx)(i.a,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)(o.a,{component:function(){return Object(x.jsx)(J,{countriesList:n||null,randomCountriesList:l||null})},exact:!0,path:"/"}),Object(x.jsx)(o.a,{exact:!0,path:"/:country",render:function(){return Object(x.jsx)(V,{})}}),Object(x.jsx)(B,{})]})})},G=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,133)).then((function(e){var n=e.getCLS,c=e.getFCP,r=e.getFID,a=e.getLCP,i=e.getTTFB;n(t),c(t),r(t),a(t),i(t)}))};Object(r.render)(Object(x.jsx)(c.StrictMode,{children:Object(x.jsx)(K,{})}),document.getElementById("root")),G()},47:function(t,e,n){},68:function(t,e,n){},72:function(t,e,n){},76:function(t,e,n){},77:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){},84:function(t,e,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.3b1ebdde.chunk.js.map